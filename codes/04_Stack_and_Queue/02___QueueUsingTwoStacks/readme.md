### **ЁЯМЯ ржжрзБржЗржЯрж╛ рж╕рзНржЯрзНржпрж╛ржХ ржжрж┐рзЯрзЗ ржХрж┐ржЙ ржЗржоржкрзНрж▓рж┐ржорзЗржирзНржЯрзЗрж╢ржи ЁЯМЯ**  
ржжрзБржЗржЯрж┐ рж╕рзНржЯрзНржпрж╛ржХ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ **ржПржХржЯрж┐ ржХрж┐ржЙ** рждрзИрж░рж┐ ржХрж░рждрзЗ рж╣ржмрзЗ, ржпрзЗржЦрж╛ржирзЗ **ржПржиржХрж┐ржЙ (enqueue) ржУ ржбрж┐ржХрж┐ржЙ (dequeue)** ржЕржкрж╛рж░рзЗрж╢ржи ржХрж╛рж░рзНржпржХрж░ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░ржмрзЗред  

---

## **ЁЯУМ ржЕрзНржпрж╛рж▓ржЧрж░рж┐ржжржо ржмрзНржпрж╛ржЦрзНржпрж╛:**  
- **рж╕рзНржЯрзНржпрж╛ржХ `s1` ржЗржиржкрзБржЯ рж╕рзНржЯрзНржпрж╛ржХ рж╣рж┐рж╕рзЗржмрзЗ ржХрж╛ржЬ ржХрж░ржмрзЗ** тЖТ ржирждрзБржи ржПрж▓рж┐ржорзЗржирзНржЯ `s1`-ржП ржкрзБрж╢ рж╣ржмрзЗред  
- **рж╕рзНржЯрзНржпрж╛ржХ `s2` ржЖржЙржЯржкрзБржЯ рж╕рзНржЯрзНржпрж╛ржХ рж╣рж┐рж╕рзЗржмрзЗ ржХрж╛ржЬ ржХрж░ржмрзЗ** тЖТ ржбрж┐ржХрж┐ржЙ ржЕржкрж╛рж░рзЗрж╢ржи ржХрж░рж╛рж░ рж╕ржорзЯ `s1` ржерзЗржХрзЗ рж╕ржм ржПрж▓рж┐ржорзЗржирзНржЯ `s2`-рждрзЗ ржкрзБрж╢ ржХрж░рж╛ рж╣ржмрзЗ, ржпрж╛рждрзЗ `FIFO` ржЕрж░рзНржбрж╛рж░рзЗ ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯред  
- **ржбрж┐ржХрж┐ржЙ ржХрж░рж╛рж░ рж╕ржорзЯ:**  
  - ржпржжрж┐ `s2` ржЦрж╛рж▓рж┐ ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ `s1` ржерзЗржХрзЗ рж╕ржм ржПрж▓рж┐ржорзЗржирзНржЯ `s2`-рждрзЗ рж╕рж░рж┐рзЯрзЗ ржирзЗржУрзЯрж╛ рж╣ржмрзЗред  
  - ржПрж░ржкрж░ `s2` ржерзЗржХрзЗ ржкржк ржХрж░рзЗ ржПрж▓рж┐ржорзЗржирзНржЯ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рж╛ рж╣ржмрзЗред  
- **ржлрзНрж░ржирзНржЯ ржжрзЗржЦрж╛рж░ рж╕ржорзЯ:**  
  - ржпржжрж┐ `s2` ржЦрж╛рж▓рж┐ ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ `s1` ржерзЗржХрзЗ `s2`-рждрзЗ рж╕ржм ржПрж▓рж┐ржорзЗржирзНржЯ рж╕рж░рж╛ржирзЛ рж╣ржмрзЗред  
  - `s2`-ржПрж░ ржЯржк ржПрж▓рж┐ржорзЗржирзНржЯржЗ ржлрзНрж░ржирзНржЯ ржПрж▓рж┐ржорзЗржирзНржЯред  

---

## **ЁЯТ╗ PHP ржХрзЛржб:**  

```php
class QueueUsingTwoStacks {
    private $s1 = [];
    private $s2 = [];

    // ржПржиржХрж┐ржЙ (enqueue)
    public function enqueue($x) {
        array_push($this->s1, $x);
    }

    // ржбрж┐ржХрж┐ржЙ (dequeue)
    public function dequeue() {
        if (empty($this->s2)) {
            while (!empty($this->s1)) {
                array_push($this->s2, array_pop($this->s1));
            }
        }

        return empty($this->s2) ? -1 : array_pop($this->s2);
    }

    // ржлрзНрж░ржирзНржЯ ржПрж▓рж┐ржорзЗржирзНржЯ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рж╛ (remove ржирж╛ ржХрж░рзЗ)
    public function front() {
        if (empty($this->s2)) {
            while (!empty($this->s1)) {
                array_push($this->s2, array_pop($this->s1));
            }
        }

        return empty($this->s2) ? -1 : end($this->s2);
    }
}

// ржЗржиржкрзБржЯ ржкрзНрж░рж╕рзЗрж╕рж┐ржВ
$q = intval(trim(fgets(STDIN)));
$queue = new QueueUsingTwoStacks();

for ($i = 0; $i < $q; $i++) {
    $input = explode(" ", trim(fgets(STDIN)));
    
    if ($input[0] == "1") {
        $queue->enqueue(intval($input[1]));
    } elseif ($input[0] == "2") {
        echo $queue->dequeue() . "\n";
    } elseif ($input[0] == "3") {
        echo $queue->front() . "\n";
    }
}
```

---

## **тЪЩя╕П ржХрж┐ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ:**  
1. **`enqueue(x)` ржЕржкрж╛рж░рзЗрж╢ржи:** ржирждрзБржи ржПрж▓рж┐ржорзЗржирзНржЯ **`s1`-ржП ржпрзЛржЧ ржХрж░рж╛ рж╣рзЯ**ред  
2. **`dequeue()` ржЕржкрж╛рж░рзЗрж╢ржи:**  
   - ржпржжрж┐ **`s2` ржЦрж╛рж▓рж┐ ржерж╛ржХрзЗ**, рждрж╛рж╣рж▓рзЗ **`s1` ржерзЗржХрзЗ `s2`-рждрзЗ ржПрж▓рж┐ржорзЗржирзНржЯ рж╕рж░рж╛ржирзЛ рж╣рзЯ**ред  
   - ржПрж░ржкрж░ **`s2` ржерзЗржХрзЗ ржПрж▓рж┐ржорзЗржирзНржЯ ржкржк ржХрж░рзЗ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рж╛ рж╣рзЯ**ред  
   - ржпржжрж┐ **ржжрзБржЗржЯрж╛ рж╕рзНржЯрзНржпрж╛ржХржЗ ржЦрж╛рж▓рж┐ ржерж╛ржХрзЗ**, рждрж╛рж╣рж▓рзЗ `-1` рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рж╛ рж╣рзЯред  
3. **`front()` ржЕржкрж╛рж░рзЗрж╢ржи:**  
   - **`s2` ржЦрж╛рж▓рж┐ ржерж╛ржХрж▓рзЗ `s1` ржерзЗржХрзЗ `s2`-рждрзЗ рж╕ржм ржПрж▓рж┐ржорзЗржирзНржЯ ржкрзБрж╢ ржХрж░рж╛ рж╣рзЯ**ред  
   - ржПрж░ржкрж░ **`s2`-ржПрж░ ржЯржк ржПрж▓рж┐ржорзЗржирзНржЯ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рж╛ рж╣рзЯ**ред  
   - ржпржжрж┐ **ржжрзБржЗржЯрж╛ рж╕рзНржЯрзНржпрж╛ржХржЗ ржЦрж╛рж▓рж┐ ржерж╛ржХрзЗ**, рждрж╛рж╣рж▓рзЗ `-1` рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рж╛ рж╣рзЯред  

---

## **ЁЯЦея╕П ржЗржиржкрзБржЯ-ржЖржЙржЯржкрзБржЯ:**  

### **ржЙржжрж╛рж╣рж░ржг рзз:**  
#### **ЁЯУе ржЗржиржкрзБржЯ:**  
```
6
1 10
1 20
3
2
3
2
```

#### **ЁЯУд ржЖржЙржЯржкрзБржЯ:**  
```
10
10
20
20
```

#### **ЁЯУЭ ржмрзНржпрж╛ржЦрзНржпрж╛:**  
1. **`1 10` тЖТ** `s1 = [10]`  
2. **`1 20` тЖТ** `s1 = [10, 20]`  
3. **`3` (ржлрзНрж░ржирзНржЯ ржЪрзЗржХ) тЖТ `10`**  
4. **`2` (ржбрж┐ржХрж┐ржЙ) тЖТ `10` рж░рж┐ржорзБржн, `s2 = []`, `s1 = [20]`**  
5. **`3` (ржлрзНрж░ржирзНржЯ ржЪрзЗржХ) тЖТ `20`**  
6. **`2` (ржбрж┐ржХрж┐ржЙ) тЖТ `20` рж░рж┐ржорзБржн, `s1 = []`, `s2 = []`**  

---

## **тП│ ржЯрж╛ржЗржо ржХржоржкрзНрж▓рзЗржХрзНрж╕рж┐ржЯрж┐ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг**  

### **ЁЯФ╣ ржПржиржХрж┐ржЙ (`enqueue(x)`)**  
- **O(1)** рж╕ржорзЯ рж▓рж╛ржЧрзЗ, ржХрж╛рж░ржг рж╢рзБржзрзБ `s1`-ржП ржПрж▓рж┐ржорзЗржирзНржЯ ржкрзБрж╢ ржХрж░рж╛ рж╣рзЯред  

### **ЁЯФ╣ ржбрж┐ржХрж┐ржЙ (`dequeue()`)**  
- **ржЕржорж░ (Amortized) O(1)** тЖТ  
  - `s2` ржпржжрж┐ ржЦрж╛рж▓рж┐ ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ `s1` ржерзЗржХрзЗ `s2`-рждрзЗ **O(n)** рж╕ржорзЯ ржирж┐рзЯрзЗ рж╕ржм ржПрж▓рж┐ржорзЗржирзНржЯ рж╕рж░рж╛ржирзЛ рж╣рзЯред  
  - ржХрж┐ржирзНрждрзБ ржкрзНрж░рждрж┐ржЯрж┐ ржПрж▓рж┐ржорзЗржирзНржЯ **рж╢рзБржзрзБ ржПржХржмрж╛рж░ржЗ `s1` ржерзЗржХрзЗ `s2`-рждрзЗ ржпрж╛рзЯ**, рждрж╛ржЗ **ржкрзНрж░рждрж┐ ржЕржкрж╛рж░рзЗрж╢ржирзЗрж░ ржЬржирзНржп ржЧрзЬ рж╕ржорзЯ O(1)**ред  

### **ЁЯФ╣ ржлрзНрж░ржирзНржЯ (`front()`)**  
- **O(1)** (ржПржХржЗ рж▓ржЬрж┐ржХ, ржХрж╛рж░ржг `s2` ржерзЗржХрзЗ рж╕рж░рж╛рж╕рж░рж┐ ржлрзНрж░ржирзНржЯ ржирзЗржУрзЯрж╛ ржпрж╛рзЯ)ред  

---

## **ЁЯТ╛ рж╕рзНржкрзЗрж╕ ржХржоржкрзНрж▓рзЗржХрзНрж╕рж┐ржЯрж┐ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг**  

- **O(n)** ржЕрждрж┐рж░рж┐ржХрзНржд ржЬрж╛рзЯржЧрж╛ рж▓рж╛ржЧрзЗ, ржХрж╛рж░ржг **ржжрзБржЗржЯрж┐ рж╕рзНржЯрзНржпрж╛ржХ** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ, ржпрж╛ ржХрж┐ржЙ-ржПрж░ рж╕ржм ржПрж▓рж┐ржорзЗржирзНржЯ ржзрж░рзЗ рж░рж╛ржЦрждрзЗ ржкрж╛рж░рзЗред  

---

## **ЁЯУК ржЪрзВрзЬрж╛ржирзНржд ржмрж┐рж╢рзНрж▓рзЗрж╖ржг:**  

| ржЕржкрж╛рж░рзЗрж╢ржи | ржЯрж╛ржЗржо ржХржоржкрзНрж▓рзЗржХрзНрж╕рж┐ржЯрж┐ |  
|--------------|----------------|  
| **enqueue(x)** | **O(1)** |  
| **dequeue()** | **ржЕржорж░ (Amortized) O(1)** |  
| **front()** | **O(1)** |  
| **рж╕рзНржкрзЗрж╕ ржХржоржкрзНрж▓рзЗржХрзНрж╕рж┐ржЯрж┐** | **O(n)** |  

---

## **ЁЯФС ржорзВрж▓ ржкрзЯрзЗржирзНржЯрж╕ржорзВрж╣**  
тЬЕ **рж╕рзНржЯрзНржпрж╛ржХ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржХрж┐ржЙ ржЗржоржкрзНрж▓рж┐ржорзЗржирзНржЯ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ**ред  
тЬЕ **ржЕржорж░ (Amortized) O(1) ржЯрж╛ржЗржо ржХржоржкрзНрж▓рзЗржХрзНрж╕рж┐ржЯрж┐** ржерж╛ржХрж╛рзЯ ржПржЯрж┐ ржХрж╛рж░рзНржпржХрж░ред  
тЬЕ **FIFO ржЖржЪрж░ржг ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рждрзЗ `s1` ржУ `s2` рж╕рзНржЯрзНржпрж╛ржХ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ**ред  
тЬЕ **ржжрзНржмрж┐рждрзАрзЯ рж╕рзНржЯрзНржпрж╛ржХ `s2` рж╢рзБржзрзБржорж╛рждрзНрж░ ржжрж░ржХрж╛рж░ рж╣рж▓рзЗ `s1` ржерзЗржХрзЗ ржлрж┐рж▓ ржХрж░рж╛ рж╣рзЯ**ред  

---

### **ЁЯУв рж╕рж╛рж░рж╕ржВржХрзНрж╖рзЗржк:**  
- **ржжрзБржЗржЯрж┐ рж╕рзНржЯрзНржпрж╛ржХ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржХрж╛рж░рзНржпржХрж░ ржХрж┐ржЙ ржЗржоржкрзНрж▓рж┐ржорзЗржирзНржЯ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ**ред  
- **рж╕ржорж╕рзНржд ржЕржкрж╛рж░рзЗрж╢ржи O(1) ржЯрж╛ржЗржорзЗ рж╕ржорзНржкржирзНржи рж╣рзЯ (ржбрж┐ржХрж┐ржЙ ржУ ржлрзНрж░ржирзНржЯ ржЕрзНржпрж╛ржорж░рзНржЯрж╛ржЗржЬржб O(1))**ред  
- **рж╕рзНржЯрзНржпрж╛ржХрзЗрж░ рж╕рж╛рж╣рж╛ржпрзНржпрзЗ рж╕рж╣ржЬржмрзЛржзрзНржпржнрж╛ржмрзЗ ржХрж┐ржЙ-ржПрж░ ржЖржЪрж░ржг ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ**ред  
- **ржПржЯрж┐ ржмрзЬ ржЗржиржкрзБржЯ ржХрзНрж╖рзЗрждрзНрж░рзЗржУ ржжрзНрж░рзБржд ржХрж╛ржЬ ржХрж░рждрзЗ рж╕ржХрзНрж╖ржо**ред